"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_mask=require("./../components/mask.js"),_mask2=_interopRequireDefault(_mask),_ajax=require("./../ajax.js"),api=require("./../api.js"),timer=require("./../utils/wxTimer.js"),BargainList=function(t){function e(){var t,a,i,r;_classCallCheck(this,e);for(var s=arguments.length,n=Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=i=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n))),i.config={navigationBarTitleText:"我的砍价"},i.components={},i.mixins=[],i.data={requestImgUrl:"",barginData:[],goods_id:"",curpage:1,hasmore:!1,allpage:null,waitForArr:[{time:10},{time:20},{time:300},{time:400}],wxTimerList:{}},i.computed={},i.methods={addressBtnSubmit:function(){this.addressFlag=!1,this.shareFlag=!0},attrBtnSubmit:function(){this.attrFlag=!1,this.addressFlag=!0},reduNum:function(){1!=this.goodsNum&&this.goodsNum--},addNum:function(){this.goodsNum++},jumpTimeDetails:function(t,e){this.attrFlag=!0,this.goods_id=t,this.$apply(),this.getShopDetails()},hideMask:function(){},changeAttr:function(t,e,a){this.activeAttr[t]=e,this.goods_spec[t]=a;var i=this.spec_list[this.activeAttr.join("|")];this.goods_id=i,this.$apply(),this.getShopDetails()}},i.events={},r=a,_possibleConstructorReturn(i,r)}return _inherits(e,t),_createClass(e,[{key:"onShow",value:function(){var t=this.$parent,e=t.globalData.address;this.address=e}},{key:"onLoad",value:function(){this.requestImgUrl=this.$parent.globalData.requestImgUrl,this.bargainGoodsList();var t=this;this.waitForArr.forEach(function(e,a){e.timer=new timer({beginTime:e.time,name:"timer"+a}),e.timer.start(t)})}},{key:"bargainGoodsList",value:function(){var t=this;(0,_ajax.ajax)({url:api.bargainGoodsList,data:{page:10,curpage:this.curpage}}).then(function(e){t.barginData=e.datas.list,t.hasmore=e.datas.hasmore,t.allpage=e.datas.allpage||0,t.$apply()})}},{key:"onReachBottom",value:function(){this.hasmore&&(this.curpage++,this.requestIndexGoodsList())}},{key:"onUnload",value:function(){this.waitForArr.forEach(function(t){return t.timer.stop()})}}]),e}(_wepy2.default.page);Page(require("./../npm/wepy/lib/wepy.js").default.$createPage(BargainList,"pages/bargain-list"));