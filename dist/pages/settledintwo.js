"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_step=require("./../components/step.js"),_step2=_interopRequireDefault(_step),_ajax=require("./../ajax.js"),_base=require("./../utils/base.js"),api=require("./../api.js"),_=require("./../utils/underscore.js"),Settledintwo=function(e){function t(){var e,n,o,a;_classCallCheck(this,t);for(var s=arguments.length,r=Array(s),i=0;i<s;i++)r[i]=arguments[i];return n=o=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.config={navigationBarTitleText:"入驻审核"},o.$repeat={},o.$props={step:{"xmlns:v-bind":"","v-bind:state.sync":"state"}},o.$events={},o.components={step:_step2.default},o.mixins=[],o.data={state:2,admin:"",name:"",password:"",contacts:"",phone:"",address:""},o.computed={},o.methods={submit:function(e){this.debounce(e)}},o.events={},a=n,_possibleConstructorReturn(o,a)}return _inherits(t,e),_createClass(t,[{key:"onShow",value:function(){}},{key:"onLoad",value:function(){var e=this;this.debounce=_.debounce(this.submit,1e3,{immediate:!0}),(0,_ajax.ajax)({url:api.getJoinStep1,icon:"none"}).then(function(t){if(200==t.code&&1==t.datas.state){var n=t.datas.data,o=n.seller_name,a=n.store_name,s=n.seller_psw,r=n.contacts_name,i=n.contacts_phone,c=n.company_address_detail;e.admin=o,e.name=a,e.password=s,e.contacts=r,e.phone=i,e.address=c,e.$apply()}})}},{key:"submit",value:function(e){var t=this,n=e.detail.value,o=n.admin,a=n.name,s=n.password,r=n.contacts,i=n.phone,c=n.address;return(0,_base.format)("password",o)?a?(0,_base.format)("password",s)?r?(0,_base.format)("phone",i)?c?void(0,_ajax.ajax)({url:api.joinStep1,data:{seller_name:o,store_name:a,seller_psw:s,contacts_name:r,contacts_phone:i,company_address_detail:c}}).then(function(e){if(200==e.code&&(wx.showToast({title:e.datas.msg,icon:"none"}),1==e.datas.state))var n=setTimeout(function(){t.$redirect("settledinthree"),clearTimeout(n)},1e3)}):(wx.showToast({title:"请输入商铺地址",icon:"none"}),!1):(wx.showToast({title:"请输入正确格式联系电话",icon:"none"}),!1):(wx.showToast({title:"请输入联系人姓名",icon:"none"}),!1):(wx.showToast({title:"请按正确格式输入密码",icon:"none"}),!1):(wx.showToast({title:"请输入商铺名称",icon:"none"}),!1):(wx.showToast({title:"请按正确格式输入账号",icon:"none"}),!1)}}]),t}(_wepy2.default.page);Page(require("./../npm/wepy/lib/wepy.js").default.$createPage(Settledintwo,"pages/settledintwo"));